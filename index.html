<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>NPC random name generator</title>
<link href="style.css" rel="stylesheet" type="text/css">
<script type="module">
  import get_names from "./names.js"
  function append_names(el, tag, names) {
    for (let person of names) {
      const np = document.createElement(tag)
      np.textContent = person
      el.appendChild(np)
    }
  }
  window.addEventListener('load', (e) => {
    let count = 5
    let size = 1000
    const srch = document.location.search.match(/count=(\d+)/)
    const srch2 = document.location.search.match(/size=(\d+)/)
    if (srch && srch[1]) {  // the (\d+) part
      count = parseInt(srch[1])
      document.querySelector('input[name=count]').value = count
    }
    if (srch2 && srch2[1]) {  // the (\d+) part
      size = parseInt(srch2[1])
      document.querySelector('input[name=size]').value = size
    }
    const names = get_names(count, size)
    append_names(document.querySelector('ol.boys'), 'li', names['boys'])
    append_names(document.querySelector('ol.girls'), 'li', names['girls'])
   })
  document.querySelector('input[name=size]').addEventListener('change', (e) => {
    document.querySelector('output[for=size]').value = e.target.value })
</script>
</head>
<body>
<h1>NPC name generator (Modern, American)</h1>
<div class="names">
<ol class="boys"></ol>
<ol class="girls"></ol>
</div>
<form>
<label for="count">How many names (each)?
<input name="count" type="number" value="5"></input>
</label>
<label for="size">Size of pool from which to pick the names?
<input name="size" type="range" value="1000" min="5" max="1000" step="5" list="steps"></input><output for="size" name="size_val">5</output></label>
<datalist id="steps">
<option>10</option>
<option>20</option>
<option>50</option>
<option>100</option>
<option>200</option>
<option>500</option>
<option>750</option>
<option>1000</option>
</datalist>
<button>Reload</button>
</form>
</body>
</html>
